var dexec = require( './lib/deferred-exec.js' );
dexec( 'echo "hi" 1>&2' ).done( function( stdout, stderr, originalCommand ) {
  console.dir( arguments );
}).fail( function( err ) {
  console.dir( arguments );
});


// require and mixin lodash with _.deferred
var _ = require( 'lodash' );
_.mixin( require( 'underscore.deferred' ) );

var commandA = dexec( 'echo "another"' );
var commandB = dexec( 'echo "hi"' );

// when both commands succeed
_.when( commandA, commandB ).done( function( a, b ){
  console.log( 'commandA output:', a[0] );
  console.log( 'commandB output:', b[0] );
});

dexec.file( './test/test.sh' ).done( function(){
  console.dir( arguments );
});

dexec.spawn( 'ps', [ 'aux' ] ).done( function( stdout, stderr, command ) {
  console.log( '' );
  console.log( '\n%%%%%%%%%%%%' );
  console.log( 'finally!' )
  console.log( stdout );
 }).progress( function( data ) {
  console.log( '' );
  console.log( "\n############" );
  console.log( 'progress:' );
  console.dir( data );
}).fail( function( shit ) {
   console.log( 'shit', shit );
 });

